<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Liên hệ & Hỗ trợ</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <link rel="stylesheet" href="../themes.css" />
    <script src="../kiemdangnhap.js"></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      /* --- COPY TỪ DEM.HTML --- */
      :root {
        --glass-bg: var(--card, rgba(255, 255, 255, 0.05));
        --glass-border: var(--glass-border, rgba(255, 255, 255, 0.1));
        --glass-shadow: var(--glass-shadow, 0 8px 32px 0 rgba(0, 0, 0, 0.37));
      }

      body {
        margin: 0;
        font-family: "Inter", sans-serif;
        background-color: transparent;
        color: var(--text-color);
        min-height: 100vh;
        padding-top: 80px;
        margin: 0;
      }

      .content-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        padding: 20px;
        max-width: 1000px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 30px;
      }
      header h1 {
        color: var(--accent-color);
        font-weight: 700;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      }
      .subtitle {
        opacity: 0.7;
      }

      /* Khung kính (Glass Cards) */
      .card-panel {
        background: var(--glass-bg);
        border: 1px solid var(--glass-border);
        box-shadow: var(--glass-shadow);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 16px;
        padding: 25px;
        width: 100%;
        margin-bottom: 20px;
        transition: all 0.3s ease;
      }

      /* Custom Tabs (Responsive & Equal Width) */
      .nav-pills {
        width: 100%;
        display: flex;
        justify-content: space-between; /* Chia đều */
        gap: 10px; /* Khoảng cách giữa các tab */
      }
      .nav-item {
        flex: 1; /* Mỗi tab chiếm 1 phần bằng nhau */
        text-align: center;
      }
      .nav-pills .nav-link {
        color: var(--text-color);
        background: rgba(0, 0, 0, 0.2);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        padding: 12px 10px; /* Tăng padding dọc cho dễ bấm */
        transition: 0.3s;
        width: 100%; /* Full chiều rộng của nav-item */
        white-space: nowrap; /* Giữ chữ 1 dòng */
        overflow: hidden;
        text-overflow: ellipsis; /* Cắt chữ nếu quá dài trên mobile */
      }
      .nav-pills .nav-link.active {
        background: var(--accent-color);
        color: #000;
        font-weight: bold;
        box-shadow: 0 0 15px var(--accent-color);
        border-color: var(--accent-color);
      }

      /* Custom Form Inputs */
      .form-control,
      .form-select {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid var(--glass-border);
        color: white;
        border-radius: 8px;
        padding: 10px;
      }
      .form-control:focus,
      .form-select:focus {
        background: rgba(0, 0, 0, 0.5);
        color: white;
        border-color: var(--accent-color);
        box-shadow: 0 0 10px rgba(56, 189, 248, 0.2);
      }
      .form-label {
        font-size: 0.9rem;
        opacity: 0.8;
        margin-bottom: 5px;
      }

      /* Accordion */
      .accordion-item {
        background: transparent;
        border: 1px solid var(--glass-border);
        margin-bottom: 10px;
        border-radius: 8px !important;
        overflow: hidden;
      }
      .accordion-button {
        background: rgba(255, 255, 255, 0.05);
        color: var(--text-color);
        box-shadow: none !important;
      }
      .accordion-button:not(.collapsed) {
        background: rgba(56, 189, 248, 0.2);
        color: var(--accent-color);
      }
      .accordion-body {
        background: rgba(0, 0, 0, 0.2);
      }

      /* Pricing Card */
      .pricing-item {
        border: 1px solid transparent;
        position: relative;
        overflow: hidden;
        height: 100%; /* Để các thẻ cao bằng nhau */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }
      .pricing-item.popular {
        border-color: var(--accent-color);
        background: linear-gradient(
          180deg,
          rgba(56, 189, 248, 0.1),
          transparent
        );
      }
      .badge-popular {
        position: absolute;
        top: 10px;
        right: -30px;
        background: var(--accent-color);
        color: #000;
        font-size: 0.7rem;
        padding: 5px 30px;
        transform: rotate(45deg);
        font-weight: bold;
      }
      .price-amount {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--accent-color);
      }

      /* Button Styles */
      .btn-primary {
        background-color: var(--accent-color);
        border: none;
        color: #000;
        font-weight: 600;
        border-radius: 8px;
        padding: 10px 20px;
      }
      .btn-primary:hover {
        opacity: 0.9;
        box-shadow: 0 0 15px var(--accent-color);
      }
      .btn-outline-light {
        border-color: var(--glass-border);
        color: var(--text-color);
        border-radius: 8px;
      }
      .btn-outline-light:hover {
        background: var(--accent-color);
        border-color: var(--accent-color);
        color: #000;
      }

      /* === RESPONSIVE CHO MOBILE === */
      @media (max-width: 768px) {
        .content-wrapper {
          padding: 15px;
        }

        /* Chữ trong Tab nhỏ lại trên mobile */
        .nav-pills .nav-link {
          font-size: 0.85rem;
          padding: 10px 5px;
        }

        /* QR Code và Thông tin chuyển khoản xếp dọc */
        #payment-area .d-md-flex {
          flex-direction: column;
        }

        /* Ảnh QR nhỏ lại xíu cho vừa màn hình */
        #payment-area img {
          width: 120px;
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="../index.html"><b>MUPCLOCK</b></a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="../index.html">Trang chủ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../congcu/app.html">Công cụ</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../cuahang/shop.html">Cửa Hàng</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../taikhoan/account.html">Tài khoản</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="#">Liên hệ</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="content-wrapper">
      <header>
        <h1>Trung tâm hỗ trợ</h1>
        <p class="subtitle">Giải đáp thắc mắc & Nạp xu tiện lợi</p>
      </header>

      <ul
        class="nav nav-pills mb-4 justify-content-center"
        id="pills-tab"
        role="tablist"
      >
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="pills-guide-tab"
            data-bs-toggle="pill"
            data-bs-target="#pills-guide"
          >
            <i class="fas fa-book me-2"></i>Hướng Dẫn
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="pills-service-tab"
            data-bs-toggle="pill"
            data-bs-target="#pills-service"
          >
            <i class="fas fa-coins me-2"></i>Nạp Xu
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="pills-contact-tab"
            data-bs-toggle="pill"
            data-bs-target="#pills-contact"
          >
            <i class="fas fa-headset me-2"></i>CSKH
          </button>
        </li>
      </ul>

      <div class="tab-content w-100" id="pills-tabContent">
        <div class="tab-pane fade show active" id="pills-guide">
          <div class="row g-4">
            <div class="col-lg-6">
              <div class="card-panel h-100">
                <h3 class="mb-4" style="font-size: 1.2rem; opacity: 0.9">
                  <i class="fas fa-tools text-info"></i> Công cụ
                </h3>
                <div class="accordion" id="accordionTools">
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#q1"
                      >
                        Sử dụng Đồng hồ đếm ngày?
                      </button>
                    </h2>
                    <div
                      id="q1"
                      class="accordion-collapse collapse"
                      data-bs-parent="#accordionTools"
                    >
                      <div class="accordion-body">
                        Chọn ngày giờ mong muốn -> Bấm "Bắt đầu". Dữ liệu sẽ tự
                        động lưu lại kể cả khi bạn tắt máy.
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#q2"
                      >
                        Nhạc báo thức có lặp lại không?
                      </button>
                    </h2>
                    <div
                      id="q2"
                      class="accordion-collapse collapse"
                      data-bs-parent="#accordionTools"
                    >
                      <div class="accordion-body">
                        Có. Khi hết giờ, nhạc sẽ kêu liên tục cho đến khi bạn
                        bấm nút "Tắt chuông".
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-lg-6">
              <div class="card-panel h-100">
                <h3 class="mb-4" style="font-size: 1.2rem; opacity: 0.9">
                  <i class="fas fa-shopping-cart text-warning"></i> Cửa hàng
                </h3>
                <div class="accordion" id="accordionShop">
                  <div class="accordion-item">
                    <h2 class="accordion-header">
                      <button
                        class="accordion-button collapsed"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#q3"
                      >
                        Theme mua rồi dùng được bao lâu?
                      </button>
                    </h2>
                    <div
                      id="q3"
                      class="accordion-collapse collapse"
                      data-bs-parent="#accordionShop"
                    >
                      <div class="accordion-body">
                        Vĩnh viễn. Vật phẩm đã mua sẽ gắn liền với tài khoản của
                        bạn.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane fade" id="pills-service">
          <div class="card-panel text-center mb-4">
            <h4>Tỷ giá quy đổi</h4>
            <p class="text-success fw-bold fs-4 m-0">1.000 VNĐ = 100 XU</p>
          </div>

          <div class="row g-4 justify-content-center">
            <div class="col-md-4">
              <div class="card-panel pricing-item text-center">
                <h5 class="opacity-75">Gói Tiết Kiệm</h5>
                <div class="my-3">
                  <i class="fas fa-coins fa-3x text-secondary"></i>
                </div>
                <div class="price-amount">10.000đ</div>
                <p>Nhận <b>1.000 Xu</b></p>
                <button
                  class="btn btn-outline-light w-100 mt-2"
                  onclick="showPayment('Gói 10k')"
                >
                  Chọn gói
                </button>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card-panel pricing-item popular text-center">
                <h5 style="color: var(--rubik-ready)">Gói Dân Chơi</h5>
                <small>Khuyên dùng</small>
                <div class="my-3">
                  <i
                    class="fas fa-sack-dollar fa-3x"
                    style="color: var(--rubik-ready)"
                  ></i>
                </div>
                <div class="price-amount" style="color: var(--rubik-ready)">
                  50.000đ
                </div>
                <p>
                  Nhận <b>5.500 Xu</b>
                  <span class="small text-success">(+10%)</span>
                </p>
                <button
                  class="btn btn-primary w-100 mt-2"
                  onclick="showPayment('Gói 50k')"
                >
                  Chọn gói
                </button>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card-panel pricing-item text-center">
                <h5 style="color: var(--rubik-wait)">Gói Đại Gia</h5>
                <div class="my-3">
                  <i
                    class="fas fa-gem fa-3x"
                    style="color: var(--rubik-wait)"
                  ></i>
                </div>
                <div class="price-amount" style="color: var(--rubik-wait)">
                  100.000đ
                </div>
                <p>
                  Nhận <b>12.000 Xu</b>
                  <span class="small text-success">(+20%)</span>
                </p>
                <button
                  class="btn btn-outline-light w-100 mt-2"
                  onclick="showPayment('Gói 100k')"
                >
                  Chọn gói
                </button>
              </div>
            </div>
          </div>

          <div id="payment-area" class="card-panel mt-4 text-center d-none">
            <h4 class="text-warning mb-3">Thông tin chuyển khoản</h4>
            <div
              class="d-md-flex justify-content-center align-items-center gap-4"
            >
              <div class="bg-white p-2 rounded d-inline-block">
                <img src="qrtk.jpg" alt="QR" width="150" />
              </div>
              <div class="text-start mt-3 mt-md-0">
                <p class="mb-1">Ngân hàng: <b>Techcombank</b></p>
                <p class="mb-1">STK: <b>112011200799</b></p>
                <p class="mb-1">Chủ Tài Khoản: <b>LE DUC TUAN HUNG</b></p>
                <p class="mb-0">
                  Nội dung:
                  <b class="text-warning" id="pay-content"
                    >MUPCLOCK [USER] [GOI]</b
                  >
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="tab-pane fade" id="pills-contact">
          <div class="row">
            <div class="col-lg-8">
              <div class="card-panel">
                <h3 class="mb-4">
                  <i class="fas fa-paper-plane text-accent"></i> Gửi yêu cầu
                </h3>
                <form id="contactForm" onsubmit="handleFormSubmit(event)">
                  <div class="row">
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Tên hiển thị</label>
                      <input
                        type="text"
                        class="form-control"
                        id="contactName"
                        required
                      />
                    </div>
                    <div class="col-md-6 mb-3">
                      <label class="form-label">Email</label>
                      <input
                        type="email"
                        class="form-control"
                        id="contactEmail"
                        required
                      />
                    </div>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Vấn đề</label>
                    <select class="form-select" id="contactTopic">
                      <option>Báo lỗi kỹ thuật</option>
                      <option>Xác nhận nạp xu</option>
                      <option>Góp ý</option>
                    </select>
                  </div>
                  <div class="mb-3">
                    <label class="form-label">Nội dung</label>
                    <textarea
                      class="form-control"
                      rows="4"
                      placeholder="Mô tả chi tiết..."
                      required
                    ></textarea>
                  </div>
                  <button type="submit" class="btn btn-primary w-100">
                    Gửi ngay
                  </button>
                </form>
              </div>
            </div>

            <div class="col-lg-4 mt-4 mt-lg-0">
              <div class="card-panel text-center">
                <h5 class="text-danger mb-3">
                  <i class="fas fa-bug"></i> Lỗi thường gặp
                </h5>
                <p class="small opacity-75">
                  <b>Trang tài khoản không hiện thông tin cá nhân?</b><br />
                  Bạn hãy đăng xuất và vào lại phiên đăng nhập, hệ thống sẽ tự
                  động update thông tin về tài khoản của bạn.
                </p>
                <hr class="border-secondary" />
                <p class="small opacity-75">
                  <b>Nạp tiền bao lâu có xu?</b><br />
                  Từ 5-10 phút. Nếu lâu hơn hãy gửi form yêu cầu.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer class="mt-5 py-3 text-center text-muted">
      <small style="font-size: x-small">&copy; 2025 MUPCODER</small>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="../theme-manager.js"></script>

    <script>
      const currentUser = localStorage.getItem("currentUser");
      if (currentUser)
        document.getElementById("contactName").value = currentUser;

      function showPayment(pkg) {
        const area = document.getElementById("payment-area");
        const content = document.getElementById("pay-content");
        area.classList.remove("d-none");
        content.innerText = `MUPCLOCK ${
          currentUser || "USER"
        } ${pkg.toUpperCase()}`;
        area.scrollIntoView({ behavior: "smooth" });
      }

      // --- HÀM GỬI FORM VỀ GOOGLE SHEET ---
      function handleFormSubmit(e) {
        e.preventDefault();

        const btn = e.target.querySelector("button");
        const originalText = btn.innerText;

        // Lấy dữ liệu từ form
        const formData = {
          name: document.getElementById("contactName").value,
          email: document.getElementById("contactEmail").value,
          topic: document.getElementById("contactTopic").value,
          message: e.target.querySelector("textarea").value,
        };

        // Hiệu ứng loading
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Đang gửi...';

        const SCRIPT_URL =
          "https://script.google.com/macros/s/AKfycbxuQHACg0RNl1J7XRmc2M_4spd28T_663Udn-AswC5cSugE_ZPLMZEtkXaz4QwMh5n2/exec";

        fetch(SCRIPT_URL, {
          method: "POST",
          body: JSON.stringify(formData),
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
        })
          .then(() => {
            alert("Đã gửi yêu cầu thành công! Chúng tôi sẽ phản hồi sớm.");
            btn.disabled = false;
            btn.innerText = originalText;
            e.target.reset();
          })
          .catch((error) => {
            console.error("Lỗi:", error);
            alert("Có lỗi xảy ra. Vui lòng thử lại sau!");
            btn.disabled = false;
            btn.innerText = originalText;
          });
      }
    </script>
  </body>
</html>
